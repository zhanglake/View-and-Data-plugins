!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["Viewing.Extension.Transform"]=t():e["Viewing.Extension.Transform"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(11),c=r(u),l=n(6),f=r(l),h=n(5),p=r(h),d=function(e){function t(e,n){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e,n));return r.transformTool=new c["default"](e),r._viewer.toolController.registerTool(r.transformTool),r}return a(t,e),s(t,[{key:"load",value:function(){var e=this;if(this._control=p["default"].createButton("toolbar-transform","glyphicon glyphicon-wrench","Transform Tool",function(){var t=e.transformTool.getName();e.transformTool.active?(e._viewer.toolController.deactivateTool(t),e._control.container.classList.remove("active")):(e._viewer.toolController.activateTool(t),e._control.container.classList.add("active"))}),this.parentControl=this._options.parentControl,!this.parentControl){var t=this._viewer.getToolbar(!0);this.parentControl=new Autodesk.Viewing.UI.ControlGroup("transform"),t.addControl(this.parentControl)}return this.parentControl.addControl(this._control),console.log("Viewing.Extension.Transform loaded"),!0}},{key:"unload",value:function(){this.parentControl.removeControl(this._control),this._viewer.toolController.deactivateTool(this.transformTool.getName()),console.log("Viewing.Extension.Transform unloaded")}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Transform"}}]),t}(f["default"]);Autodesk.Viewing.theExtensionManager.registerExtension(d.ExtensionId,d)},,,,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._events={}}return r(e,[{key:"on",value:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this}},{key:"off",value:function(e,t){if(void 0==e)return void(this._events={});if(e in this._events!=!1)return t?this._events[e].splice(this._events[e].indexOf(t),1):this._events[e]=[],this}},{key:"emit",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var r=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==r)return r}}},{key:"guid",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?"xxxxxxxxxxxx":arguments[0],n=(new Date).getTime(),t=e.replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:7&t|8).toString(16)});return t}}]),e}();t["default"]=o},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(u){return void n(u)}return a.done?void e(s):Promise.resolve(s).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){o(this,e)}return a(e,null,[{key:"guid",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?"xxxxxxxxxxxx":arguments[0],n=(new Date).getTime(),t=e.replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:7&t|8).toString(16)});return t}},{key:"createButton",value:function(e,t,n,r){var o=new Autodesk.Viewing.UI.Button(e);return o.icon.style.fontSize="24px",o.icon.className=t,o.setToolTip(n),o.onClick=r,o}},{key:"createControlGroup",value:function(e,t){var n=e.getToolbar(!0);if(n){var r=new Autodesk.Viewing.UI.ControlGroup(t);return n.addControl(r),r}}},{key:"nodeIdToFragIds",value:function(t,o){var i=this,a=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return new Promise(function(){var u=r(regeneratorRuntime.mark(function c(r,u){var l,f,h,p,d;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,l=s||t.getData().instanceTree,f=l.dbIdToNode[o],void 0!=f){i.next=5;break}return i.abrupt("return",u("Invalid dbId: "+o));case 5:return h=[].concat(n(Array.isArray(f.fragIds)?f.fragIds:[f.fragIds])),f.children&&a&&(p=[],f.children.forEach(function(n){p.push(e.nodeIdToFragIds(t,n.dbId,a,l))}),d=Promise.all(p),d.forEach(function(e){h=[].concat(n(h),[e])})),i.abrupt("return",r(h));case 10:return i.prev=10,i.t0=i["catch"](0),i.abrupt("return",u(i.t0));case 13:case"end":return i.stop()}},c,i,[[0,10]])}));return function(e,t){return u.apply(this,arguments)}}())}},{key:"getLeafNodes",value:function(e,t){var n=this;return new Promise(function(){var o=r(regeneratorRuntime.mark(function a(r,o){var s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=function(){var n=function o(e){var t=0;u.enumNodeChildren(e,function(e){o(e),++t}),0==t&&s.push(e)};return s=[],u=e.getData().instanceTree,t=t||u.getRootId(),n(t),{v:r(s)}}(),"object"!==("undefined"==typeof c?"undefined":i(c))){n.next=4;break}return n.abrupt("return",c.v);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n["catch"](0),n.abrupt("return",o(n.t0));case 9:case"end":return n.stop()}},a,n,[[0,6]])}));return function(e,t){return o.apply(this,arguments)}}())}},{key:"getFragIds",value:function(t,n){var o=this;return new Promise(function(){var i=r(regeneratorRuntime.mark(function a(r,i){var s,u,c,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=t.getData().instanceTree,o.next=4,e.getLeafNodes(t,n);case 4:for(u=o.sent,c=[],l=0;l<u.length;++l)s.enumNodeFragments(u[l],function(e){c.push(e)});return o.abrupt("return",r(c));case 10:return o.prev=10,o.t0=o["catch"](0),o.abrupt("return",i(o.t0));case 13:case"end":return o.stop()}},a,o,[[0,10]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:"getWorldBoundingBox",value:function(t,n){var o=this;return new Promise(function(){var i=r(regeneratorRuntime.mark(function a(r,i){var s,u,c,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.getFragIds(t,n);case 3:if(s=o.sent,s.length){o.next=6;break}return o.abrupt("return",i("No geometry, invalid dbId?"));case 6:return u=t.getFragmentList(),c=new THREE.Box3,l=new THREE.Box3,s.forEach(function(e){u.getWorldBounds(e,c),l.union(c)}),o.abrupt("return",r(l));case 13:return o.prev=13,o.t0=o["catch"](0),o.abrupt("return",i(o.t0));case 16:case"end":return o.stop()}},a,o,[[0,13]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:"getProperties",value:function(e,t){var n=this;return new Promise(function(){var o=r(regeneratorRuntime.mark(function i(r,o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,e.getProperties(t,function(e){return e.properties?r(e.properties):o("No Properties")}),n.next=7;break;case 4:return n.prev=4,n.t0=n["catch"](0),n.abrupt("return",o(n.t0));case 7:case"end":return n.stop()}},i,n,[[0,4]])}));return function(e,t){return o.apply(this,arguments)}}())}},{key:"getProperty",value:function(e,t,n){var o=this;return new Promise(function(){var i=r(regeneratorRuntime.mark(function a(r,i){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:o.prev=0,e.getProperties(t,function(e){e.properties?(e.properties.forEach(function(e){return n==e.displayName?r(e):void 0}),i(new Error("Not Found"))):i(new Error("Error getting properties"))}),o.next=7;break;case 4:return o.prev=4,o.t0=o["catch"](0),o.abrupt("return",i(o.t0));case 7:case"end":return o.stop()}},a,o,[[0,4]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:"getPropertyList",value:function(t,n){var o=this;return new Promise(function(){var i=r(regeneratorRuntime.mark(function a(r,i){var s,u,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=n.map(function(n){return e.getProperties(t,n)}),o.next=4,Promise.all(s);case 4:return u=o.sent,c=[],u.forEach(function(e){e.forEach(function(e){c.indexOf(e.displayName)<0&&c.push(e.displayName)})}),o.abrupt("return",r(c.sort()));case 10:return o.prev=10,o.t0=o["catch"](0),o.abrupt("return",i(o.t0));case 13:case"end":return o.stop()}},a,o,[[0,10]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:"mapComponentsByProp",value:function(t,n,o){var i=this;return new Promise(function(){var a=r(regeneratorRuntime.mark(function s(a,u){var c,l,f;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,c=o.map(function(o){return new Promise(function(){var a=r(regeneratorRuntime.mark(function s(r,a){var u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.getProperty(t,o,n);case 3:return u=i.sent,u.dbId=o,i.abrupt("return",r(u));case 8:if(i.prev=8,i.t0=i["catch"](0),"Not Found"!=i.t0.message){i.next=14;break}return u={displayValue:"Not Available"},u.dbId=o,i.abrupt("return",r(u));case 14:return i.abrupt("return",a(i.t0));case 15:case"end":return i.stop()}},s,i,[[0,8]])}));return function(e,t){return a.apply(this,arguments)}}())}),s.next=4,Promise.all(c);case 4:return l=s.sent,f={},l.forEach(function(e){var t=e.displayValue;"string"==typeof t&&(t=t.split(":")[0]),f[t]||(f[t]=[]),f[t].push(e.dbId)}),s.abrupt("return",a(f));case 10:return s.prev=10,s.t0=s["catch"](0),s.abrupt("return",u(s.t0));case 13:case"end":return s.stop()}},s,i,[[0,10]])}));return function(e,t){return a.apply(this,arguments)}}())}},{key:"runTaskOnDataTree",value:function(e,t){var n=[],r=function o(e){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1];e.children&&e.children.forEach(function(t){o(t,e)});var i=t(e,r);n.push(i)};return r(e),Promise.all(n)}},{key:"drawBox",value:function(e,t,n){function r(t,n){for(var r=[],o=0;o<t.length;o+=2){var i=t[o],a=t[o+1],s=new THREE.Geometry;s.vertices.push(new THREE.Vector3(i.x,i.y,i.z)),s.vertices.push(new THREE.Vector3(a.x,a.y,a.z)),s.computeLineDistances();var u=new THREE.Line(s,n);e.impl.scene.add(u),r.push(u)}return r}var o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=o;i||(i=new THREE.LineBasicMaterial({color:16776960,linewidth:2}),e.impl.matman().addMaterial("ADN-Material-Line",i,!0));var a=r([{x:t.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:n.z},{x:n.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:t.z},{x:t.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:t.z},{x:n.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:n.z},{x:t.x,y:t.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:n.y,z:t.z},{x:n.x,y:t.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:n.y,z:n.z}],i);return e.impl.sceneUpdated(!0),a}},{key:"setMaterial",value:function(){function t(e,t,r){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function o(t,n,r){var i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getFragIds(t,n);case 2:i=o.sent,i.forEach(function(e){t.getFragmentList().setMaterial(e,r)});case 4:case"end":return o.stop()}},o,this)}));return t}()},{key:"buildModelTree",value:function(e){function t(e){r.enumNodeChildren(e.dbId,function(o){var i=null;n?i=n(o):(e.children=e.children||[],i={dbId:o,name:r.getNodeName(o)},e.children.push(i)),t(i)})}var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=e.getData().instanceTree,o=r.getRootId(),i={dbId:o,name:r.getNodeName(o)};return t(i),i}},{key:"executeTaskOnModelTree",value:function(e,t){function n(i){o.enumNodeChildren(i,function(o){r.push(t(e,o)),n(o)})}var r=[],o=e.getData().instanceTree,i=o.getRootId();return n(i),r}},{key:"mobile",get:function(){return{getUserAgent:function(){return navigator.userAgent},isAndroid:function(){return this.getUserAgent().match(/Android/i)},isBlackBerry:function(){return this.getUserAgent().match(/BlackBerry/i)},isIOS:function(){return this.getUserAgent().match(/iPhone|iPad|iPod/i)},isOpera:function(){return this.getUserAgent().match(/Opera Mini/i)},isWindows:function(){return this.isWindowsDesktop()||this.isWindowsMobile()},isWindowsMobile:function(){return this.getUserAgent().match(/IEMobile/i)},isWindowsDesktop:function(){return this.getUserAgent().match(/WPDesktop/i)},isAny:function(){return this.isAndroid()||this.isBlackBerry()||this.isIOS()||this.isWindowsMobile()}}}}]),e}();t["default"]=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();AutodeskNamespace("Viewing.Extension");var a=function(e){function t(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e,o));return i._viewer=e,i._options=o,i}return o(t,e),i(t,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Base"}}]),t}(Autodesk.Viewing.Extension);t["default"]=a},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),c=r(u),l=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this));return n._viewer=e,n._dbIds=[],n._hitPoint=null,n._selectSet=null,n._isDragging=!1,n._transformMesh=null,n._modifiedFragIdMap={},n._transformControlTx=null,n._selectedFragProxyMap={},n.onTxChange=n.onTxChange.bind(n),n.onAggregateSelectionChanged=n.onAggregateSelectionChanged.bind(n),n.onCameraChanged=n.onCameraChanged.bind(n),n.handleSelectionChanged=n.handleSelectionChanged.bind(n),n}return a(t,e),s(t,[{key:"getNames",value:function(){return["Viewing.Transform.Tool"]}},{key:"getName",value:function(){return"Viewing.Transform.Tool"}},{key:"createTransformMesh",value:function(){var e=new THREE.MeshPhongMaterial({color:16711680});this._viewer.impl.matman().addMaterial("transform-tool-material",e,!0);var t=new THREE.Mesh(new THREE.SphereGeometry(1e-4,5),e);return t.position.set(0,0,0),t}},{key:"onTxChange",value:function(){for(var e in this._selectedFragProxyMap){var t=this._selectedFragProxyMap[e],n=new THREE.Vector3(this._transformMesh.position.x-t.offset.x,this._transformMesh.position.y-t.offset.y,this._transformMesh.position.z-t.offset.z);t.position=n,t.updateAnimTransform()}this._viewer.impl.sceneUpdated(!0),this.emit("transform.TxChange",{dbIds:this._dbIds,fragIds:Object.keys(this._selectedFragProxyMap)})}},{key:"onCameraChanged",value:function(){this._transformControlTx&&this._transformControlTx.update()}},{key:"onAggregateSelectionChanged",value:function(e){var t=[],n=[];if(e.selections&&e.selections.length){var r=e.selections[0];t=r.dbIdArray,n=r.fragIdsArray}this.handleSelectionChanged(t,n)}},{key:"handleSelectionChanged",value:function(e,t){var n=this;if(this._selectedFragProxyMap={},this._dbIds=e,!t.length)return this._hitPoint=null,this._transformControlTx.visible=!1,this._transformControlTx.removeEventListener("change",this.onTxChange),this._viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),void this.emit("transform.select",{dbIds:this._dbIds});if(this._hitPoint){if(this._selectSet=this.emit("transform.select",{dbIds:this._dbIds}),this._selectSet){if(!this._selectSet.selectable)return this._hitPoint=null,void this._viewer.select([]);if(!this._selectSet.transformable)return void(this._hitPoint=null)}this._transformControlTx.visible=!0,this._transformControlTx.setPosition(this._hitPoint),this._transformControlTx.addEventListener("change",this.onTxChange),this._viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),t.forEach(function(e){var t=n._viewer.impl.getFragmentProxy(n._viewer.model,e);t.getAnimTransform();var r={x:n._hitPoint.x-t.position.x,y:n._hitPoint.y-t.position.y,z:n._hitPoint.z-t.position.z};t.offset=r,n._selectedFragProxyMap[e]=t,n._modifiedFragIdMap[e]={}}),this._hitPoint=null}}},{key:"normalize",value:function(e){var t=this._viewer.navigation.getScreenViewport(),n={x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height};return n}},{key:"getHitPoint",value:function(e){var t={x:e.clientX,y:e.clientY},n=this.normalize(t),r=this._viewer.utilities.getHitPoint(n.x,n.y);return r}},{key:"activate",value:function(){this.active=!0,this._viewer.select([]);var e=this._viewer.model.getBoundingBox();this._viewer.impl.createOverlayScene("TransformToolOverlay"),this._transformControlTx=new THREE.TransformControls(this._viewer.impl.camera,this._viewer.impl.canvas,"translate"),this._transformControlTx.setSize(5*e.getBoundingSphere().radius),this._transformControlTx.visible=!1,this._viewer.impl.addOverlay("TransformToolOverlay",this._transformControlTx),this._transformMesh=this.createTransformMesh(),this._transformControlTx.attach(this._transformMesh),this._viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged)}},{key:"deactivate",value:function(){this.active=!1,this._viewer.impl.removeOverlay("TransformToolOverlay",this._transformControlTx),this._transformControlTx.removeEventListener("change",this.onTxChange),this._transformControlTx=null,this._viewer.impl.removeOverlayScene("TransformToolOverlay"),this._viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),this._viewer.removeEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged)}},{key:"handleButtonDown",value:function(e,t){return this._hitPoint=this.getHitPoint(e),this._isDragging=!0,!!this._transformControlTx.onPointerDown(e)}},{key:"handleButtonUp",value:function(e,t){return this._isDragging=!1,!!this._transformControlTx.onPointerUp(e)}},{key:"handleMouseMove",value:function(e){return this._isDragging?!!this._transformControlTx.onPointerMove(e):!!this._transformControlTx.onPointerHover(e)}}]),t}(c["default"]);t["default"]=l}])});